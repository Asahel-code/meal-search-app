<script setup lang="ts">
import {ref, onMounted, onUnmounted} from 'vue';
import {RouterLink} from 'vue-router';

defineProps<{openNav: boolean; setOpenNav: (isOpen: boolean) => void}>();
const headerRef = ref<HTMLElement | null>(null);

const handleScroll = () => {
	if (document.documentElement.scrollTop > 80) {
		headerRef.value?.classList.add('shrink');
	} else {
		headerRef.value?.classList.remove('shrink');
	}
};

onMounted(() => {
	window.addEventListener('scroll', handleScroll);
});

onUnmounted(() => {
	window.removeEventListener('scroll', handleScroll);
});
</script>

<template>
	<nav
		ref="headerRef"
		class="fixed top-0 w-full bg-[#1a1a1a] text-white z-50 transition-all duration-300 border-b border-gray-600">
		<div class="container mx-auto px-4 flex items-center justify-between py-4">
			<RouterLink to="/" class="flex items-center space-x-2 w-10 h-10">
				<img src="/logo.svg" alt="logo" class="w-full" />
			</RouterLink>

			<div class="hidden lg:flex space-x-8">
				<RouterLink to="/my-favourite" class="hover:text-primary transition-colors"
					>Favorites</RouterLink
				>
				<RouterLink to="/categories" class="hover:text-primary transition-colors"
					>Explore By Category</RouterLink
				>
				<RouterLink to="/ingredients" class="hover:text-primary transition-colors"
					>Explore By Ingredient</RouterLink
				>
			</div>

			<button
				@click="setOpenNav(!openNav)"
				class="lg:hidden text-3xl focus:outline-none">
				<svg
					v-if="!openNav"
					width="21"
					height="19"
					viewBox="0 0 21 19"
					fill="none"
					xmlns="http://www.w3.org/2000/svg">
					<path
						d="M20.2969 3.30657H2.29687C1.46887 3.30657 0.796875 2.6114 0.796875 1.75485C0.796875 0.898297 1.46887 0.203125 2.29687 0.203125H20.2969C21.1249 0.203125 21.7969 0.898297 21.7969 1.75485C21.7969 2.6114 21.1249 3.30657 20.2969 3.30657ZM20.2969 7.6514H2.29687C1.46887 7.6514 0.796875 8.34657 0.796875 9.20312C0.796875 10.0597 1.46887 10.7548 2.29687 10.7548H20.2969C21.1249 10.7548 21.7969 10.0597 21.7969 9.20312C21.7969 8.34657 21.1249 7.6514 20.2969 7.6514ZM20.2969 15.0997H2.29687C1.46887 15.0997 0.796875 15.7948 0.796875 16.6514C0.796875 17.508 1.46887 18.2031 2.29687 18.2031H20.2969C21.1249 18.2031 21.7969 17.508 21.7969 16.6514C21.7969 15.7948 21.1249 15.0997 20.2969 15.0997Z"
						fill="white" />
				</svg>
			</button>
		</div>

		<div v-if="openNav" class="fixed inset-0 h-screen flex justify-end">
			<div class="w-60 h-full bg-black bg-opacity-80 p-5">
				<div class="flex justify-end mb-4">
					<button @click="setOpenNav(!openNav)" class="focus:outline-none">
						<svg
							width="24"
							height="24"
							viewBox="0 0 24 24"
							fill="none"
							xmlns="http://www.w3.org/2000/svg">
							<g clip-path="url(#clip0_161_2)">
								<path
									d="M1.15723 -0.0205078C1.21058 -0.022381 1.26394 -0.0242542 1.31891 -0.0261841C1.77809 0.0402096 2.08928 0.320987 2.40416 0.641605C2.44534 0.682577 2.48651 0.723549 2.52893 0.765763C2.64214 0.878656 2.75481 0.992047 2.86726 1.10569C2.98902 1.22846 3.11146 1.35055 3.23381 1.47272C3.44538 1.68417 3.65653 1.89605 3.86738 2.10822C4.17223 2.41498 4.47773 2.72109 4.78339 3.02704C5.27935 3.52352 5.77479 4.02051 6.2699 4.51784C6.75069 5.00078 7.23172 5.48348 7.71309 5.96584C7.74279 5.9956 7.77249 6.02536 7.80309 6.05603C7.9521 6.20534 8.10111 6.35465 8.25012 6.50395C9.48521 7.74147 10.7194 8.97983 11.9531 10.2188C12.1023 10.1529 12.2022 10.075 12.3169 9.95965C12.3514 9.92516 12.3859 9.89066 12.4215 9.85512C12.4591 9.81707 12.4967 9.77902 12.5355 9.73982C12.5757 9.69951 12.6159 9.65921 12.6574 9.61769C12.769 9.50575 12.8804 9.3936 12.9917 9.28137C13.1118 9.16038 13.2322 9.03966 13.3525 8.91892C13.5611 8.7096 13.7695 8.50012 13.9778 8.29055C14.3073 7.95915 14.6371 7.62821 14.9671 7.29735C15.08 7.18411 15.1929 7.07087 15.3058 6.95763C15.3341 6.92933 15.3623 6.90103 15.3913 6.87187C15.7126 6.54969 16.0337 6.2274 16.3548 5.90507C16.3841 5.87561 16.4135 5.84614 16.4437 5.81578C16.919 5.33859 17.3941 4.86112 17.869 4.38359C18.3569 3.89314 18.8452 3.40314 19.3339 2.91352C19.6351 2.61162 19.9361 2.30936 20.2365 2.00661C20.4425 1.79901 20.649 1.59184 20.8559 1.385C20.9751 1.26574 21.0941 1.14631 21.2126 1.02634C21.3413 0.89606 21.4709 0.766703 21.6007 0.637415C21.6376 0.599678 21.6746 0.561941 21.7127 0.52306C21.991 0.248081 22.2818 0.039299 22.6729 -0.0311279C23.0368 -0.0268358 23.3298 0.00860987 23.625 0.234375C23.8881 0.506245 24.0133 0.777146 24.0205 1.15723C24.0224 1.21058 24.0243 1.26394 24.0262 1.31891C23.9598 1.77809 23.679 2.08928 23.3584 2.40416C23.2969 2.46592 23.2969 2.46592 23.2342 2.52893C23.1213 2.64214 23.008 2.75481 22.8943 2.86726C22.7715 2.98902 22.6495 3.11146 22.5273 3.23381C22.3158 3.44538 22.104 3.65653 21.8918 3.86738C21.585 4.17223 21.2789 4.47773 20.973 4.78339C20.4765 5.27935 19.9795 5.77479 19.4822 6.2699C18.9992 6.75069 18.5165 7.23172 18.0342 7.71309C18.0044 7.74279 17.9746 7.77249 17.944 7.80309C17.7947 7.9521 17.6454 8.10111 17.496 8.25012C16.2585 9.48521 15.0202 10.7194 13.7812 11.9531C13.8471 12.1023 13.925 12.2022 14.0403 12.3169C14.0748 12.3514 14.1093 12.3859 14.1449 12.4215C14.1829 12.4591 14.221 12.4967 14.2602 12.5355C14.3005 12.5757 14.3408 12.6159 14.3823 12.6574C14.4943 12.769 14.6064 12.8804 14.7186 12.9917C14.8396 13.1118 14.9603 13.2322 15.0811 13.3525C15.2904 13.5611 15.4999 13.7695 15.7095 13.9778C16.0408 14.3073 16.3718 14.6371 16.7027 14.9671C16.8159 15.08 16.9291 15.1929 17.0424 15.3058C17.0707 15.3341 17.099 15.3623 17.1281 15.3913C17.4503 15.7126 17.7726 16.0337 18.0949 16.3548C18.1391 16.3988 18.1391 16.3988 18.1842 16.4437C18.6614 16.919 19.1389 17.3941 19.6164 17.869C20.1069 18.3569 20.5969 18.8452 21.0865 19.3339C21.3884 19.6351 21.6906 19.9361 21.9934 20.2365C22.201 20.4425 22.4082 20.649 22.615 20.8559C22.7343 20.9751 22.8537 21.0941 22.9737 21.2126C23.1039 21.3413 23.2333 21.4709 23.3626 21.6007C23.4003 21.6376 23.4381 21.6746 23.4769 21.7127C23.7519 21.991 23.9607 22.2818 24.0311 22.6729C24.0268 23.0368 23.9914 23.3298 23.7656 23.625C23.4938 23.8881 23.2229 24.0133 22.8428 24.0205C22.7894 24.0224 22.7361 24.0243 22.6811 24.0262C22.2219 23.9598 21.9107 23.679 21.5958 23.3584C21.5547 23.3174 21.5135 23.2765 21.4711 23.2342C21.3579 23.1213 21.2452 23.008 21.1327 22.8943C21.011 22.7715 20.8885 22.6495 20.7662 22.5273C20.5546 22.3158 20.3435 22.104 20.1326 21.8918C19.8278 21.585 19.5223 21.2789 19.2166 20.973C18.7206 20.4765 18.2252 19.9795 17.7301 19.4822C17.2493 18.9992 16.7683 18.5165 16.2869 18.0342C16.2572 18.0044 16.2275 17.9746 16.1969 17.944C16.0479 17.7947 15.8989 17.6454 15.7499 17.496C14.5148 16.2585 13.2806 15.0202 12.0469 13.7812C11.8977 13.8471 11.7978 13.925 11.6831 14.0403C11.6486 14.0748 11.6141 14.1093 11.5785 14.1449C11.5221 14.202 11.5221 14.202 11.4645 14.2602C11.4243 14.3005 11.3841 14.3408 11.3426 14.3823C11.231 14.4943 11.1196 14.6064 11.0083 14.7186C10.8882 14.8396 10.7678 14.9603 10.6475 15.0811C10.4389 15.2904 10.2305 15.4999 10.0222 15.7095C9.69274 16.0408 9.36285 16.3718 9.03289 16.7027C8.91998 16.8159 8.80707 16.9291 8.69416 17.0424C8.66594 17.0707 8.63773 17.099 8.60865 17.1281C8.28743 17.4503 7.96632 17.7726 7.64525 18.0949C7.6159 18.1244 7.58655 18.1539 7.55631 18.1842C7.08099 18.6614 6.60595 19.1389 6.13097 19.6164C5.64312 20.1069 5.15482 20.5969 4.66613 21.0865C4.36485 21.3884 4.06395 21.6906 3.76353 21.9934C3.55746 22.201 3.35097 22.4082 3.14415 22.615C3.02493 22.7343 2.9059 22.8537 2.7874 22.9737C2.65868 23.1039 2.52906 23.2333 2.39934 23.3626C2.36235 23.4003 2.32536 23.4381 2.28725 23.4769C2.00905 23.7519 1.71823 23.9607 1.32715 24.0311C0.963174 24.0268 0.670231 23.9914 0.375 23.7656C0.1119 23.4938 -0.0132722 23.2229 -0.0205078 22.8428C-0.022381 22.7894 -0.0242542 22.7361 -0.0261841 22.6811C0.0402096 22.2219 0.320987 21.9107 0.641605 21.5958C0.682577 21.5547 0.723549 21.5135 0.765763 21.4711C0.878656 21.3579 0.992047 21.2452 1.10569 21.1327C1.22846 21.011 1.35055 20.8885 1.47272 20.7662C1.68417 20.5546 1.89605 20.3435 2.10822 20.1326C2.41498 19.8278 2.72109 19.5223 3.02704 19.2166C3.52352 18.7206 4.02051 18.2252 4.51784 17.7301C5.00078 17.2493 5.48348 16.7683 5.96584 16.2869C5.9956 16.2572 6.02536 16.2275 6.05603 16.1969C6.20534 16.0479 6.35465 15.8989 6.50395 15.7499C7.74147 14.5148 8.97983 13.2806 10.2188 12.0469C10.1529 11.8977 10.075 11.7978 9.95965 11.6831C9.92516 11.6486 9.89066 11.6141 9.85512 11.5785C9.81707 11.5409 9.77902 11.5033 9.73982 11.4645C9.69951 11.4243 9.65921 11.3841 9.61769 11.3426C9.50575 11.231 9.3936 11.1196 9.28137 11.0083C9.16038 10.8882 9.03966 10.7678 8.91892 10.6475C8.7096 10.4389 8.50012 10.2305 8.29055 10.0222C7.95915 9.69274 7.62821 9.36285 7.29735 9.03289C7.18411 8.91998 7.07087 8.80707 6.95763 8.69416C6.92933 8.66594 6.90103 8.63773 6.87187 8.60865C6.54969 8.28743 6.2274 7.96632 5.90507 7.64525C5.87561 7.6159 5.84614 7.58655 5.81578 7.55631C5.33859 7.08099 4.86112 6.60595 4.38359 6.13097C3.89314 5.64312 3.40314 5.15482 2.91352 4.66613C2.61162 4.36485 2.30936 4.06395 2.00661 3.76353C1.79901 3.55746 1.59184 3.35097 1.385 3.14415C1.26574 3.02493 1.14631 2.9059 1.02634 2.7874C0.89606 2.65868 0.766703 2.52906 0.637415 2.39934C0.580809 2.34386 0.580809 2.34386 0.52306 2.28725C0.248081 2.00905 0.039299 1.71823 -0.0311279 1.32715C-0.0268358 0.963174 0.00860987 0.670231 0.234375 0.375C0.506245 0.1119 0.777146 -0.0132722 1.15723 -0.0205078Z"
									fill="white" />
							</g>
							<defs>
								<clipPath id="clip0_161_2">
									<rect width="24" height="24" fill="white" />
								</clipPath>
							</defs>
						</svg>
					</button>
				</div>
				<nav class="flex flex-col space-y-4">
					<RouterLink
						to="/my-favourite"
						class="hover:text-primary transition-colors"
						@click="setOpenNav(!openNav)"
						>Favorites</RouterLink
					>
					<RouterLink
						to="/categories"
						class="hover:text-primary transition-colors"
						@click="setOpenNav(!openNav)"
						>Explore By Category</RouterLink
					>
					<RouterLink
						to="/ingredients"
						class="hover:text-primary transition-colors"
						@click="setOpenNav(!openNav)"
						>Explore By Ingredient</RouterLink
					>
				</nav>
			</div>
		</div>
	</nav>
</template>
